{"version":3,"file":"index.cjs","sources":["../src/shared/enum/ETransportCommand.ts","../src/shared/utils/Encodings.ts","../src/shared/utils/TransportCommands.ts","../src/shared/utils/transport.ts","../src/shared/utils/isPlainObject.ts","../src/shared/utils/AcknowledgeQueue/AcknowledgeQueueIdentifier.ts","../src/shared/enum.ts","../src/shared/models/Topic.ts","../src/shared/utils/generateQueryString.ts","../src/shared/constants.ts","../src/client/NoLagClient.ts","../src/shared/utils/AcknowledgeQueue/AcknowledgeQueueItem.ts","../src/shared/utils/AcknowledgeQueue/AcknowledgeQueueManager.ts","../src/client/index.ts","../node_modules/ws/lib/constants.js","../node_modules/ws/lib/buffer-util.js","../node_modules/ws/lib/permessage-deflate.js","../node_modules/ws/lib/limiter.js","../node_modules/ws/lib/validation.js","../node_modules/ws/lib/receiver.js","../node_modules/ws/lib/sender.js","../node_modules/ws/lib/extension.js","../node_modules/ws/lib/websocket.js","../node_modules/ws/lib/event-target.js","../node_modules/ws/lib/subprotocol.js","../node_modules/ws/lib/websocket-server.js","../src/unifiedWebsocket/node.ts","../src/api/controllers/tunnels/TunnelDevice.ts","../src/api/controllers/tunnels/TunnelPublish.ts","../src/api/controllers/tunnels/TunnelTopic.ts","../src/api/controllers/tunnels/TunnelApi.ts","../src/api/ApiTunnel.ts","../src/plugins/chat/FileDetails.ts","../node_modules/dayjs/dayjs.min.js","../src/plugins/chat/ReadReceipt.ts","../src/plugins/chat/Reaction.ts","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/plugins/chat/Message.ts","../src/shared/utils/uuid.ts","../src/shared/utils/identifiers.ts","../src/plugins/chat/Notification.ts","../src/shared/enum/ENotificationType.ts","../src/plugins/chat/Tags.ts","../src/plugins/chat/Conversation.ts","../src/shared/enum/EConversationType.ts","../src/index.ts","../src/api/index.ts","../src/plugins/chat/ChatApp.ts","../src/plugins/chat/MessageSend.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,"'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n",null,null,null,null,null,null,null,"!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));",null,null,"import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n",null,null,null,null,null,null,null,null,null,null,null,null],"names":["ETransportCommand","ETransportCommandSeparator","stringToArrayBuffer","str","buf","ArrayBuffer","length","bufView","Uint8Array","strLen","i","charCodeAt","stringToBuffer","bufferToString","buffer","uint8ArrayToString","reduce","accumulator","index","String","fromCharCode","TransportCommands","commandArray","setCommand","command","commandAction","this","push","commandActionArray","Array","isArray","convertArray","convertStringNumberArray","commandActionBuffer","from","commandActions","map","action","ArraySeparator","flat","build","transportCommands","NqlTransport","parseData","data","obj","Object","getPrototypeOf","prototype","JSON","stringify","encode","payload","separatorArray","Payload","transportCommandsUintArray","commandLength","byteLength","payloadOffset","payloadLength","payloadUintArray","tmp","set","decode","transport","totalTransportBytes","transportBufferViewer","payloadSeparatorIndex","indexOf","commands","slice","payloadStartIndex","extractedCommands","extractCommands","getCommand","hasSeparatorIndexes","commandActionUint8ArrayToString","item","join","commandActionUint8ArrayToStringArray","groupedUint8Array","tempGroup","forEach","uint8Array","Number","commandByteGroup","commandBeingAssigned","byte","values","keys","key","AcknowledgeQueueIdentifier","topicName","initiate","authentication","identifiers","presence","constructor","identifiersToOrderedString","sort","generateKey","filter","EConnectionStatus","EVisibilityState","EAccessPermission","EStatus","ETopicType","ESendAction","EEncoding","ELoadBalanceType","Topic","connection","onReceiveCallback","acknowledgeQueueManager","_tunnel","tunnel","setConnection","saveIdentifiers","OR","identifier","find","s","deleteSavedIdentifiers","identifierList","_subscribeAction","sendAction","callbackFn","send","addToSentQueue","undefined","subscribe","error","Error","Identifier","AddAction","TopicSubscribe","setPresence","Presence","TopicPresence","_onReceiveMessage","onReceive","addIdentifiers","identifiersList","TopicAddIdentifier","removeIdentifiers","DeleteAction","TopicRemoveIdentifier","unsubscribe","TopicUnsubscribe","publish","TopicPublish","generateQueryString","query","queryArray","queryObject","queryString","CONSTANT","DefaultWsHost","DefaultApiHost","DefaultWsUrl","DefaultPort","DefaultWsProtocol","DefaultApiUrl","DefaultHttpProtocol","NoLagClient","host","authToken","wsInstance","protocol","url","deviceConnectionId","deviceTokenId","defaultCheckConnectionInterval","defaultCheckConnectionTimeout","checkConnectionInterval","checkConnectionTimeout","reConnect","debug","callbackOnOpen","callbackOnReceive","callbackOnClose","callbackOnError","connectionStatus","Idle","backpressureSendInterval","senderInterval","unifiedWebsocket","bufferOnDisconnect","connectOptions","startSender","setInterval","Disconnected","Connected","sendTransport","shift","slowDownSender","backpressureInterval","clearInterval","addToBuffer","setReConnect","connect","initWebsocketConnection","authenticate","disconnect","close","onOpen","event","_onOpen","onMessage","_onReceive","onClose","_onClose","onError","_onError","Initiate","Connecting","Authenticate","Reconnect","TunnelAuthenticate","Authentication","callback","onReceiveMessage","ackCommand","decoded","InitConnection","addToReceivedQueue","console","log","AcknowledgeConnected","Acknowledge","AcknowledgeAuthenticated","ackIdentifier","AcknowledgeGeneral","ackErrorIdentifier","AcknowledgeError","OnOpen","presences","transportResponse","OnReceive","OnClose","OnError","heartbeat","TunnelHeartbeat","AcknowledgeQueueItem","_expirePeriodInMs","expireTimestamp","properties","expirePeriodInMs","Date","now","periodInMs","isExpired","expire","AcknowledgeQueueSentItem","super","AcknowledgeQueueReceivedItem","AcknowledgeQueueManager","queues","sent","received","matchSentQueueWithReceiveQueue","foundReceiveQueueItem","cleanUpReceivedQueue","runQueue","setTimeout","Promise","resolve","reject","generatedKey","getSentQueue","getReceivedQueue","Tunnel","noLagClient","topics","heartbeatTimer","heartBeatInterval","visibilityState","Visible","callbackOnDisconnect","callbackOnReconnect","callbackOnReceivedError","connectionOptions","options","disconnectOnNoVisibility","onVisibilityChange","startHeartbeat","stopHeartbeat","reconnect","document","addEventListener","async","Hidden","tunnelInstance","err","canReconnect","doReconnect","onDisconnect","onReconnect","onErrors","getTopic","topic","encodedBuffer","TunnelPublish","status","BINARY_TYPES","hasBlob","Blob","constants","EMPTY_BUFFER","Buffer","alloc","GUID","kForOnEventAttribute","Symbol","kListener","kStatusCode","kWebSocket","NOOP","require$$0","FastBuffer","species","_mask","source","mask","output","offset","_unmask","bufferUtilModule","exports","concat","list","totalLength","target","allocUnsafe","byteOffset","toArrayBuffer","toBuffer","readOnly","isBuffer","isView","unmask","process","env","WS_NO_BUFFER_UTIL","bufferUtil","require","e","zlib","require$$1","Limiter","kDone","kRun","limiter","concurrency","pending","Infinity","jobs","add","job","require$$2","require$$3","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","RangeError","code","removeListener","reset","inflateOnError","_inflate","permessageDeflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","params","concurrencyLimit","extensionName","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","configurations","normalizeParams","acceptAsServer","acceptAsClient","cleanup","offers","opts","accepted","response","value","num","isInteger","TypeError","decompress","fin","done","_decompress","result","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","on","write","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","isUtf8","_isValidUTF8","len","validationModule","isBlob","arrayBuffer","type","stream","toStringTag","isValidStatusCode","isValidUTF8","tokenChars","WS_NO_UTF_8_VALIDATE","Writable","PerMessageDeflate","require$$4","receiver","_allowSynchronousEvents","allowSynchronousEvents","_binaryType","binaryType","_extensions","extensions","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_errored","_loop","_state","_write","encoding","cb","startLoop","consume","n","dst","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","createError","compressed","haveLength","readUInt16BE","readUInt32BE","Math","pow","controlMessage","dataMessage","messageLength","fragments","emit","setImmediate","end","ErrorCtor","message","prefix","statusCode","errorCode","captureStackTrace","randomFillSync","applyMask","require$$5","kByteLength","maskBuffer","RANDOM_POOL_SIZE","randomPool","randomPoolPointer","Sender","socket","generateMask","_generateMask","_maskBuffer","_socket","_firstFragment","_queue","onerror","frame","dataLength","merge","skipMasking","opcode","rsv1","writeUInt16BE","writeUIntBE","enqueue","dispatch","sendFrame","ping","size","getBlobData","pong","perMessageDeflate","binary","blob","then","destroyed","nextTick","callCallbacks","dequeue","catch","_","Reflect","apply","cork","uncork","sender","dest","name","elem","extension","format","k","v","parse","header","create","paramName","mustUnescape","isEscaping","inQuotes","start","SyntaxError","replace","token","EventEmitter","https","http","net","tls","randomBytes","createHash","URL","require$$7","require$$8","Receiver","require$$9","require$$10","require$$11","require$$12","EventTarget","removeEventListener","kCode","kData","kMessage","kReason","kTarget","kType","kWasClean","Event","defineProperty","enumerable","CloseEvent","reason","wasClean","ErrorEvent","MessageEvent","handler","listener","listeners","wrapper","isBinary","toString","callListener","_closeFrameReceived","_closeFrameSent","once","thisArg","handleEvent","call","eventTarget","require$$13","require$$14","require$$15","kAborted","protocolVersions","readyStates","subprotocolRegex","WebSocket","address","protocols","_closeCode","_closeMessage","_closeTimer","_errorEmitted","_paused","_protocol","_readyState","CONNECTING","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","_autoPong","autoPong","includes","bufferedAmount","_writableState","isPaused","onclose","onopen","onmessage","readyState","_url","setSocket","head","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","senderOnError","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","socketOnError","OPEN","emitClose","CLOSED","removeAllListeners","CLOSING","errorEmitted","setCloseTimer","msg","abortHandshake","_req","pause","sendAfterClose","resume","needDrain","terminate","destroy","websocket","protocolVersion","followRedirects","maxRedirects","socketPath","hostname","timeout","method","path","port","parsedUrl","href","isSecure","isIpcUrl","invalidUrlMessage","pathname","hash","emitErrorAndClose","defaultPort","request","protocolSet","Set","req","createConnection","tlsConnect","netConnect","startsWith","headers","Connection","Upgrade","search","handshakeTimeout","test","has","origin","Origin","username","password","auth","parts","split","_originalIpc","_originalSecure","_originalHostOrSocketPath","entries","toLowerCase","listenerCount","isSameHost","authorization","cookie","res","location","addr","abort","upgrade","digest","update","serverProt","protError","secWebSocketExtensions","extensionNames","finishRequest","servername","isIP","setHeader","bind","receiverOnFinish","read","clearTimeout","finished","property","get","subprotocol","require$$6","keyRegex","server","STATUS_CODES","h","abortHandshakeOrEmitwsClientError","websocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","body","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","handleUpgrade","clients","_shouldEmitClose","shouldHandle","version","secWebSocketProtocol","info","secure","authorized","encrypted","verified","completeUpgrade","readable","writable","ws","next","delete","TunnelDevice","routeNamespace","parentRouteNamespace","tunnelId","requestParams","createDevice","fetch","baseURL","json","getDeviceById","listDevices","updateDevice","deleteDevice","baseUrl","wsHost","TunnelTopic","createTopic","getTopicById","topicId","listTopics","updateTopic","deleteTopic","TunnelApi","apiTunnel","devices","getTunnel","updateTunnel","deleteTunnel","httpPublish","ApiTunnel","apiKey","wsUrl","tunnels","tunnelQuery","URLSearchParams","createTunnel","FileDetails","fileName","contentType","t","r","u","a","o","c","f","d","l","$","y","M","weekdays","months","ordinal","m","z","utcOffset","abs","floor","date","year","month","clone","ceil","p","w","D","ms","Q","g","S","O","args","arguments","b","locale","$L","utc","$u","x","$x","$offset","$d","NaN","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","isSame","startOf","endOf","isAfter","isBefore","$g","unix","valueOf","getTime","toDate","$locale","weekStart","$set","min","daysInMonth","round","subtract","invalidDate","meridiem","monthsShort","weekdaysMin","weekdaysShort","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","extend","$i","isDayjs","en","Ls","ReadReceipt","messageId","readDate","userId","dayjs","Reaction","emoji","byteToHex","getRandomValues","rnds8","native","randomUUID","crypto","v4","rnds","random","rng","arr","unsafeStringify","Message","sentDate","messageText","files","mentionMessageId","originalMessageId","readReceipts","reactions","file","readReceipt","reaction","setReadReceipt","setReaction","serialize","findIdentifierId","setIdentifierId","prefixTag","idToSet","Notification","ENotificationType","chatTag","notificationTag","messageTag","Conversation","conversationId","projectId","privateConversation","avatar","messageNotificationCount","chatTopic","_messages","_notificationCallback","_onMessages","setChatTopic","addMessage","actionNotificationCallback","notification","notificationHandler","NewMessage","KeyStroke","messageHandler","sendMessage","sendKeyStroke","onNotificationCallback","onMessagesCallback","transportHandler","hasNotification","hasMessage","clearMessageReceivedCount","conversationMessages","EConversationType","Client","chatAppName","notificationIdentifier","userConversations","_joinedConversations","activeConversationId","_activeConversation","setChatAppNotificationIdentifier","conversationIdFromIdentifier","generateConversationIdentifiers","conversationIds","joinedConversations","retrieveConversations","GROUP","joinConversation","foundLocalUserConversation","joinConversations","leaveConversation","leaveConversations","setActiveConversation","activeConversation","onConversationMessages","onConversationNotifications","replyMessageId"],"mappings":"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","x_google_ignoreList":[14,15,16,17,18,19,20,21,22,23,24,25,33,36,37,38,39]}